<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>Aplic. Web de jQuery Mobile</title>
<link href="jquery-mobile/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>

<script>
    $(function() {
        $("#enviadatos").click(function() {
            var elNombre = $("#nombre").val();
            var elMail = $("#mail").val();
            var elTeefono = $("#telefono").val();
            $("#nombre").val(" ");
            $("#mail").val(" ");
            $("#telefono").val(" ");

            $.ajax({
                type: "POST",
                url: "backend/clientes_agregar.php",
                data: ({name: elNombre, mail: elMail, telefono: elTelefono }),
                cache: false,
                dataType: "text",
                success: onSuccess
            });
                
        });
        function onSuccess(data){
            alert(data);
        }
        function onShow(data){
            for(j=0;j<data.length;j++){
                alert("Nombre: "+data[j].nombre + " Mail: "+data[j].mail+ " telefono: "+data[j].telefono);
            }
        }
        $("#consultadatos").click(function() {
            $.ajax({
                type: "POST",
                url: "backend/clientes_consulta.php",
                cache: false,
                dataType: "json",
                success: onShow
            });

        });

        
    });
</script>
		
<script>
    function justNumbers(e){
        var keynum = window.event ? window.event.keyCode : e.which;
        if ((keynum == 8) || (keynum == 46))
            return true;
        return /\d/.test(String.fromCharCode(keynum));
}
		
    </script>

</head> 
<body> 

<div data-role="page" id="page">
 <div data-role="header">
  <h1>Clientes</h1>
 </div>

<div data-role="fieldcontain" style="padding:20px;">
          <label for="name">Nombre:</label>
          <input type="text" name="nombre" id="nombre" value=""  />
   </div>
            
            <div data-role="fieldcontain" style="padding:20px;">
          <label for="mail">Mail:</label>
          <input type="text" name="mail" id="mail" value=""  />
   </div>
        
                  
             <div data-role="fieldcontain" style="padding:20px;">
          <label for="telefono">Tel:</label>
          <input type="text" name="telefono" id="telefono" value=""  onkeypress="return justNumbers(event);"/>
   </div>
  

  <div class="ui-body ui-body-b">
  <fieldset class="ui-grid-a">
    <div class="ui-block-a"><button type="button" data-theme="d" id="consultadatos">Cancelar</button></div>
    <div class="ui-block-b"><button type="button" data-theme="a" id="enviadatos">Enviar</button>
            
                       
                </div>
     </fieldset>
        </div>
<div data-role="footer">
  <h4>Clientes</h4>
 </div>
</div>

</body>
</html>
